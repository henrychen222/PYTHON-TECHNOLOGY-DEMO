<!--
2.5 afternoon evening
https://www.tutorialspoint.com/angularjs/angularjs_dependency_injection.htm

value:
a simple JavaScript object, which is required to pass values to the controller during config phase

factory: 
Factory is a function which is used to return value.

service:
a singleton JavaScript object containing a set of functions to perform certain tasks

provider--- config:
Provider is used by AngularJS internally to create services, factory, etc.

constant:
used to pass values at the config phase considering the fact that value cannot be used during the config phase
-->

<html>

<head>
    <title>AngularJS Dependency Injection</title>
</head>

<body>
    <h2>AngularJS Sample Application</h2>

    <div ng-app="mainApp" ng-controller="CalcController">
        <p>Enter a number: <input type="number" ng-model="number" /></p>
        <button ng-click="square()">X<sup>2</sup></button>
        <p>Result: {{result}}</p>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js">
    </script>

    <script>
        //define a module
        var mainApp = angular.module("mainApp", []);

        //create a value object as "defaultInput" and pass it a data.
        mainApp.value("defaultInput", 5);

        //inject the value in the controller using its name "defaultInput"
        mainApp.controller('CalcController', function ($scope, CalcService, defaultInput) {
            $scope.number = defaultInput;
            $scope.result = CalcService.square($scope.number);

            $scope.square = function () {
                $scope.result = CalcService.square($scope.number);
            }
        });

        //create a factory "MathService" which provides a method multiply to return multiplication of two numbers
        mainApp.factory('MathService', function () {
            var factory = {};

            factory.multiply = function (a, b) {
                return a * b;
            }
            return factory;
        });

        //inject the factory "MathService" in a service to utilize the multiply method of factory.
        mainApp.service('CalcService', function (MathService) {
            this.square = function (a) {
                return MathService.multiply(a, a);
            }
        });
       
        //create a service using provider which defines a method square to return square of a number.
        mainApp.config(function ($provide) {
            $provide.provider('MathService', function () {
                this.$get = function () {
                    var factory = {};
                    factory.multiply = function (a, b) {
                        return a * b;
                    }
                    return factory;
                };
            });
        });
        
        // mainApp.constant("{{result}}", "100")
    </script>

</body>

</html>